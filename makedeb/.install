#!/usr/bin/env bash
pre_install() {
	if [[ "${1}" == "upgrade" ]]; then

		if ! tap --version &> /dev/null; then
			echo
			printf "\033[1;31m[WARNING]\033[0;00m You appear to be upgrading from a version of Tap containing known issues with updating certain packages from the MPR.\n"
			echo "You'll need to reinstall all affected packages with 'tap install' to fix any issues with upgrading."
			echo
			echo "To find the affected packages, you can use the following command:"
			echo "  dpkg-query --show --showformat '\${Package}/\${MPR-Package}\n' | grep '^[^/]*/True' | awk -F '/' '{print \$1}'"
			echo
		fi

	fi
}
